WirenBoard Config Editor Backend
================================

Реализует серверную часть редактора конфигурационных файлов.

[mqtt-rpc API spec](./asyncapi.mqtt-rpc.yml)

### Структура файлов JSON-схем

Для отображения настроек в homeui используется JSON-схема с их описанием.
Схема должна содержать дополнительный параметр `configFile` с инструкциями для `wb-mqtt-confed`.

```json
  "configFile": {
    // Путь до файла с настройками
    "path": "/etc/wb-mqtt-serial.conf",

    // Имя сервиса, который будет перезапущен после сохранения файла с настройками
    "service": "wb-mqtt-serial",

    // Команда и её параметры, которая вызывается для преобразования JSON, полученного от homeui,
    // в формат конфигурационного файла.
    // Команда должна принимать JSON через стандартный поток ввода и возвращать конфигурационный файл через него же.
    "fromJSON": ["wb-mqtt-serial", "-J"],

    // Команда и её параметры, которая вызывается для преобразования конфигурационного файла в JSON для homeui.
    // Команда должна принимать конфигурационный файл через стандартный поток ввода и возвращать JSON через него же.
    "toJSON": ["wb-mqtt-serial", "-j"],

    // Задержка перед перезапуском сервиса в миллисекундах
    "restartDelayMS": 4000,

    // Надо ли проверять структуру полученного от homeui JSON согласно схеме.
    // Если проверка провалится, изменённый конфигурационный файл не будет записан
    // Если не задано, то проверка выполняется
    "validate": false,

    // Не отображать конфигурационный файл на странице "Конфигурационные файлы" в homeui
    "hide": true
  }
```